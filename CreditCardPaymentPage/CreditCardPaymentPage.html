<!DOCTYPE html>
<html>
    <head>
        <link href="CSS/CreditCardCSS.css" rel="stylesheet">
    </head>
    <body>
        <div class="contanier">
            <div class="creditCard">
                <div id="cardFront">
                    <div id="cardnumber" class="card-number-parts">
                        <span>####</span>
                        <span>####</span>
                        <span>####</span>
                        <span>####</span>
                    </div>
                    <div class="cardholder"><span class="normaltext">Card Holder</span><br><span id="fullName">Full Name</span></div>
                    <div class="expires"><span class="normaltext">Expires</span><div class="ayYil"><span id="ay">MM</span><span style="font-size:20px">/</span><span id="yil">YY</span></div></div>
                    <div class="visaicon"></div>
                    <div class="cip"></div>
                    <div class="temassiz"></div>
                </div>
                <div id="cardBack">
                    <div class="blackline"></div>
                    <div class="cvv"><span class="normaltext">CVV</span><br><input type="text" id="cardcvv" maxlength="3"></div>
                    <div class="visaicon"></div>
                </div>
            </div>
            <div class="enteredCardNumber">
                <span class="text">Card Number</span><br>
                <input type="text" id="cdnumber"maxlength="16" onkeyup="modify('cdnumber','cardnumber')" onblur="borderRemove('cardnumber')">
            </div>
            <div class="enteredCardHolder">
                <span class="text">Card Holders</span><br>
                <input type="text" id="cdholder" onkeyup="getInputValueandText('cdholder','fullName')" onfocus="getInputValueandText('cdholder','fullName')" onblur="borderRemove('fullName')">
            </div>
            <div class="enteredCardInformation">
                <div class="ExprisionDate"> 
                    <span class="text">Exprision Date</span><br> 
                    <select id="month" onchange="getText('month','ay')"onblur="borderRemove('ay')">
                    <option>Month</option>
                    <option>01</option>
                    <option>02</option>
                    <option>04</option>
                    <option>05</option>
                    <option>06</option>
                    <option>07</option>
                    <option>08</option>
                    <option>09</option>
                    <option>10</option>
                    <option>11</option>
                    <option>12</option>
                    </select>
                    <select id="year" onchange="getText('year','yil')" onblur="borderRemove('yil')">
                    <option>Year</option>
                    <option>23</option>
                    <option>24</option>
                    <option>25</option>
                    <option>26</option>
                    <option>27</option>
                    <option>28</option>
                    <option>29</option>
                    <option>30</option>
                    </select>
                </div>
                <div class="CvvInformation">
                    <span class="text">CVV</span><br>
                    <input type="text" id="entiredcvv" maxlength="3" onkeyup="getInputValueCvv('entiredcvv','cardcvv')" onblur="borderRemove('cardcvv'); reverseback('cardFront','cardBack')" onfocus="reverse('cardFront','cardBack')" >
                </div>
            </div>
            <div class="submit"><input type="button" value="Submit" class="button"></div>
        </div>
        <script>
        function getInputValue(textId,changedtextId)
	    {
	    var degistiren=document.getElementById(textId);
	    var degisen=document.getElementById(changedtextId); 
        degisen.value=degistiren.value;
        degisen.style.border="3px solid white";
        degisen.style.borderRadius="3px";
        degisen.style.transition="0.5s";
	    }
        function getInputValueCvv(textId,changedtextId)
	    {
	    var degistiren=document.getElementById(textId);
	    var degisen=document.getElementById(changedtextId); 
	    degisen.value=degistiren.value;
        degisen.style.transition="0.5s";
	    }
        function getInputValueandText(textId,changedtextId)
        {
            var degistiren=document.getElementById(textId);
	        var degisen=document.getElementById(changedtextId); 
	        degisen.innerHTML=degistiren.value;
            degisen.style.border="3px solid white";
            degisen.style.borderRadius="3px";
            degisen.style.transition="0.5s";
        }
        function getText(textId,changedtextId)
        {
            var degistiren=document.getElementById(textId);
	        var degisen=document.getElementById(changedtextId); 
	        degisen.innerHTML=degistiren.options[degistiren.selectedIndex].text;
            degisen.style.fontSize="19px";
            degisen.style.border="3px solid white";
            degisen.style.borderRadius="3px";
            degisen.style.transition="0.5s";
        }
        function borderRemove(id)
        {
            var column=document.getElementById(id);
            column.style.border="none";
        }
        function reverse(class1,class2)
        {
            var front=document.getElementById(class1);
            var back=document.getElementById(class2);
            front.style.transform="rotateY(180deg)";
            front.style.opacity="0";
            back.style.transform="rotateY(360deg)"
            back.style.opacity="1";
        }
        function reverseback(class1,class2)
        {
            var front=document.getElementById(class1);
            var back=document.getElementById(class2);
            front.style.transform="rotateY(0deg)";
            front.style.opacity="1";
            back.style.transform="rotateY(180deg)"
            back.style.opacity="0";
        }
        function modify(degistirenId,degisenId)
            {
              var degistiren=document.getElementById(degistirenId);
              var leng=String(degistiren.value).length;
              console.log(leng.toString()); 

              var degisen=document.getElementById(degisenId);
              
               var children= degisen.children;

              
               if(leng<5){
                children[0].innerHTML=degistiren.value;
               }
               else if(leng<9){
                var old=children[1].innerHTML=="####"?"":children[1].innerHTML;
                children[1].innerHTML=old+'*';
               }
               else if(leng<13){
                var old=children[2].innerHTML=="####"?"":children[2].innerHTML;
                children[2].innerHTML=old+'*';
               }
               else if(leng<17){
                children[3].innerHTML=String(degistiren.value).substring(12,16);
               }
               else
               {
                   console.error("karekter uzunlugu hatasi");
               }
            }
        </script>
    </body>
</html>